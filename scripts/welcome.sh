#!/usr/bin/env bash
# tuinix ISO welcome message - displayed on first login
# This script is deployed to the live ISO and sourced from the root profile.

TUINIX_DIR="/home/tuinix"

# Clear screen for clean welcome
clear

# Pre-rendered mascot logo (generated with chafa from LOGO.png)
# This avoids needing chafa and its GUI dependencies on the ISO
show_mascot() {
  cat << 'MASCOT'
[0m [38;2;0;0;0m                             [0m
 [38;2;0;0;0m          [0m     [38;2;0;0;0m              [0m
 [38;2;0;0;0m        [38;2;160;41;13m▗[38;2;174;45;15m▆[38;2;190;50;16;48;2;19;3;1m▇[38;2;193;51;17;48;2;143;36;9m▇[48;2;163;43;12m▇[48;2;145;36;9m▇[38;2;192;51;16;48;2;33;5;1m▇[38;2;191;50;16;48;2;30;6;1m▆[0m[38;2;158;41;13m▆[38;2;149;39;12m▄[0m  [38;2;0;0;0m         [0m
 [38;2;0;0;0m       [0m [38;2;1;0;0;48;2;176;46;15m▎[38;2;155;39;13;48;2;179;46;15m╷[38;2;112;24;5;48;2;184;48;16m╶[38;2;55;6;1;48;2;193;51;17m─[38;2;68;10;2;48;2;192;51;17m─[38;2;164;42;13;48;2;180;47;15m╷[38;2;154;39;12m╷[38;2;193;51;17;48;2;187;49;16m┊[48;2;193;51;17m  [38;2;194;51;17;48;2;190;50;16m┊[38;2;15;3;1;48;2;147;37;11m▝[0m[38;2;1;0;0m╴        [0m
 [38;2;0;0;0m       [0m [38;2;29;7;2;48;2;127;36;11m▘[38;2;70;40;14;48;2;188;50;16m▅[38;2;62;38;14;48;2;192;51;17m▆[38;2;57;39;14;48;2;188;50;16m▆[38;2;59;40;15;48;2;175;45;14m▅[38;2;65;36;13;48;2;187;49;16m▄[38;2;94;32;10;48;2;190;50;16m▂[38;2;147;38;12;48;2;183;48;15m╵[38;2;109;26;7;48;2;181;47;15m╺[38;2;194;51;17;48;2;175;45;15m┊[38;2;153;37;10;48;2;189;50;16m▄[38;2;143;33;9;48;2;159;38;11m▇[38;2;138;32;8;48;2;43;9;2m▊[0m [38;2;0;0;0m       [0m
 [38;2;0;0;0m       [7m[38;2;38;25;9m▊[0m[38;2;207;199;172;48;2;79;57;34m▗[38;2;145;134;110;48;2;60;42;18m▎[38;2;61;43;16;48;2;62;43;16m╺[38;2;65;47;22;48;2;108;94;71m▉[38;2;170;163;142;48;2;59;40;15m▄[48;2;61;43;16m [38;2;62;42;16;48;2;60;41;15m┊[38;2;58;31;11;48;2;155;41;13m▆[38;2;84;25;7;48;2;189;50;16m▖[38;2;111;26;8;48;2;192;51;17m▝[38;2;90;19;5;48;2;110;24;6m╴[38;2;114;23;6;48;2;72;16;4m╴[0m[38;2;66;14;4m▘        [0m
 [38;2;0;0;0m       [7m[38;2;40;27;10m▍[0m[38;2;209;201;173;48;2;86;71;48m▝[38;2;117;105;81;48;2;64;46;20m▏[48;2;62;43;16m [38;2;54;38;14;48;2;159;149;125m▋[38;2;209;201;174;48;2;105;92;69m▘[48;2;62;43;16m [38;2;62;42;16m▁[38;2;61;42;16;48;2;48;33;11m▉[38;2;26;19;5;48;2;35;22;6m┊[38;2;145;39;13;48;2;110;30;9m┊[0m [38;2;1;1;0m          [0m
 [38;2;0;0;0m    [38;2;61;42;16m▗[38;2;49;33;12m▆[38;2;43;29;10m▄[38;2;28;18;6m▂[38;2;40;27;10;48;2;59;41;15m▏[48;2;62;43;16m   [38;2;62;42;16m┒╺▉[38;2;33;21;7;48;2;60;41;15m▗[38;2;51;33;12;48;2;29;20;6m▄[38;2;60;41;15;48;2;16;10;3m▆[0m[38;2;27;19;9m▅[38;2;21;17;11m▄[0m [38;2;0;0;0m        [0m
 [38;2;0;0;0m    [0m [38;2;48;32;12;48;2;43;29;11m┈[38;2;61;42;16;48;2;59;40;15m┊[48;2;61;42;16m [38;2;43;28;10;48;2;57;39;14m╹[38;2;98;74;10;48;2;52;36;11m╎[38;2;23;89;15;48;2;51;43;13m▂[38;2;52;35;12;48;2;57;39;14m╷[38;2;62;43;16;48;2;55;37;13m┊[38;2;18;99;14;48;2;53;45;13m▗[38;2;114;94;7;48;2;50;35;9m▖[38;2;61;42;16;48;2;58;39;14m┈[38;2;62;42;16;48;2;60;41;15m╴[38;2;112;25;6;48;2;51;34;13m▂[38;2;33;27;17;48;2;29;20;12m┈[38;2;21;16;10;48;2;32;27;17m▁[38;2;33;28;18;48;2;30;24;15m┊[0m[38;2;28;24;15m▆[38;2;5;4;3m╴      [0m
 [38;2;0;0;0m     [0m  [7m[38;2;34;22;7m▆[0m [38;2;16;9;3;48;2;123;54;8m▍[38;2;178;132;7;48;2;67;67;10m╾[38;2;108;79;8;48;2;50;91;12m┰[38;2;160;118;10;48;2;55;77;11m─[38;2;135;63;9;48;2;71;102;15m▆[38;2;194;51;16;48;2;50;31;4m▄[38;2;186;49;15;48;2;47;28;9m▅[38;2;178;46;14;48;2;90;26;7m▆[38;2;142;32;8;48;2;141;33;8m▅[38;2;57;9;2;48;2;135;30;7m╿[38;2;152;42;8;48;2;34;10;3m▖[0m[7m[38;2;15;10;5m┈[38;2;17;14;9m▅[0m [38;2;0;0;0m      [0m
 [38;2;0;0;0m         [38;2;169;44;14m▝[38;2;101;25;8;48;2;186;49;16m▁[38;2;193;51;16;48;2;171;46;13m▇[38;2;193;51;17;48;2;192;51;16m┊[48;2;193;51;16m▍[38;2;192;50;16m▂[38;2;164;40;12;48;2;191;50;16m▗[38;2;178;45;14;48;2;142;32;8m▘[38;2;142;32;9;48;2;141;32;8m╴[38;2;69;13;3;48;2;141;34;8m╹[38;2;156;57;5;48;2;26;13;3m▌[38;2;63;43;16;48;2;58;39;15m┊[0m[38;2;15;10;3m╴       [0m
 [38;2;0;0;0m          [0m [38;2;1;0;0;48;2;69;16;5m╴[38;2;112;28;8;48;2;153;36;10m▁[38;2;143;33;9;48;2;192;50;17m▆[38;2;143;33;8;48;2;185;48;15m▆[38;2;176;44;13;48;2;143;33;8m▂[38;2;182;48;14;48;2;148;35;9m▄[38;2;137;32;9;48;2;171;56;11m╵[38;2;70;44;7;48;2;163;67;7m▄[38;2;62;42;15;48;2;26;16;4m╴[0m[7m[38;2;33;21;7m▅[0m [38;2;0;0;0m       [0m
 [38;2;0;0;0m           [0m [7m[38;2;79;20;4m▆[38;2;145;38;9m▄[0m[38;2;0;0;0;48;2;95;30;6m┈[48;2;95;38;5m╴[0m[7m[38;2;146;72;7m▄[0m [7m[38;2;29;19;7m▇[0m [38;2;0;0;0m         [0m
 [38;2;0;0;0m                             [0m
 [38;2;0;0;0m                             [0m
MASCOT
}

# Show the pre-rendered mascot
show_mascot

# Show welcome message with gum
if command -v gum &>/dev/null; then
  gum style \
    --border double \
    --border-foreground 208 \
    --padding "1 3" \
    --margin "1 0" \
    --align center \
    --width 60 \
    "Welcome to the tuinix Live Installer" \
    "" \
    "To install tuinix, run:" \
    "" \
    "  sudo installer" \
    "" \
    "You are in: ${TUINIX_DIR}"
else
  echo ""
  echo "=========================================="
  echo "  Welcome to the tuinix Live Installer"
  echo "=========================================="
  echo ""
  echo "  To install tuinix, run:"
  echo ""
  echo "    sudo installer"
  echo ""
  echo "  You are in: ${TUINIX_DIR}"
  echo "=========================================="
  echo ""
fi
